<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#0f172a" />
  <link rel="manifest" href="./manifest.webmanifest" />
  <link rel="icon" href="./icons/icon-192.png" />
  <title>Contexto â€” DDS TechnipFMC</title>
  <link rel="stylesheet" href="./styles.css" />
  <noscript><style>main{display:none}</style><div class="noscript">Este jogo precisa de JavaScript habilitado.</div></noscript>
</head>
<body>
  <header class="topbar" role="banner">
    <div class="brand">Contexto â€” DDS TechnipFMC <span class="ver" id="appVersion"></span></div>
    <nav class="actions" aria-label="AÃ§Ãµes">
      <button id="btnSolved" class="ghost" aria-controls="solvedDrawer" aria-expanded="false" aria-label="Ver acertos">âœ… Acertos</button>
      <button id="btnDrawer" class="ghost" aria-controls="drawer" aria-expanded="false" aria-label="Abrir dicas">â˜° Dicas</button>
      <button id="btnCategorias" class="ghost" aria-controls="categoryPanel" aria-expanded="false" aria-label="Escolher categoria">ğŸ¯ Categoria</button>
	      <button id="btnRanking" class="ghost" aria-controls="rankingDrawer" aria-expanded="false" aria-label="Ver Ranking">ğŸ† Ranking</button>
	      <button id="btnStats" class="ghost" aria-controls="statsPanel" aria-expanded="false" aria-label="Mostrar estatÃ­sticas">ğŸ“Š Stats</button>
      <button id="btnOnboarding" class="ghost" aria-label="Como jogar">â“ Como jogar</button>
    </nav>
  </header>

	  <!-- Left drawer: Ranking -->
	  <aside id="rankingDrawer" class="drawer left" aria-hidden="true" aria-labelledby="btnRanking">
	    <div class="drawer-head">
	      <strong>ğŸ† Ranking Top 10</strong>
	      <button id="btnCloseRanking" class="ghost" aria-label="Fechar">âœ•</button>
	    </div>
	    <div class="drawer-body">
	      <ul id="rankingList" class="list ranking-list">
	        <li>Carregando ranking...</li>
	      </ul>
	    </div>
	  </aside>
	
	  <!-- Left drawer: Solved words -->
  <aside id="solvedDrawer" class="drawer left" aria-hidden="true" aria-labelledby="btnSolved">
    <div class="drawer-head">
      <strong>âœ… Palavras acertadas</strong>
      <button id="btnCloseSolved" class="ghost" aria-label="Fechar">âœ•</button>
    </div>
    <div class="drawer-body">
      <div id="solvedSummary" class="small muted" style="margin-bottom:8px">â€”</div>
      <ul id="solvedList" class="list"></ul>
    </div>
  </aside>

  <!-- Right drawer: Tips -->
  <aside id="drawer" class="drawer" aria-hidden="true" aria-labelledby="btnDrawer">
    <div class="drawer-head">
      <strong>ğŸ’¡ Dicas rÃ¡pidas</strong>
      <button id="btnCloseDrawer" class="ghost" aria-label="Fechar">âœ•</button>
    </div>
    <div class="drawer-body small">
      <ul>
        <li>Use <kbd>Enter</kbd> para enviar, <kbd>Esc</kbd> para limpar.</li>
        <li><kbd>?</kbd> abre/fecha este painel. <kbd>A</kbd> = ajuda (fora do campo).</li>
        <li>Somente a <strong>primeira palavra</strong> do palpite Ã© considerada.</li>
        <li>Proximidade: <span class="badge rocket">ğŸš€ â‰¤10</span> Â· <span class="badge spark">âœ¨ â‰¤20</span> Â· <span class="badge fire">ğŸ”¥ â‰¤100</span> Â· <span class="badge snow">â„ï¸ &gt;100</span>.</li>
        <li>Ajuda custa <strong>10 pontos</strong>. A cada 10 erros, â€“1 ponto.</li>
      </ul>
    </div>
  </aside>

  <main id="main" class="container" role="main">
	    <section class="card" aria-labelledby="secInicio">
      <h2 id="secInicio">ğŸ‘¤ Informe seu nome ou apelido</h2>
      <div class="row">
        <label class="visually-hidden" for="nome">Nome</label>
        <input id="nome" type="text" placeholder="Seu nome" autocomplete="name" />
        <button id="iniciar" class="primary">Iniciar â–¶</button>
      </div>
      <div id="statsGlobais" class="stats small" aria-live="polite">
        <span class="pill" id="sgJogador">Jogador: â€”</span>
        <span class="pill" id="sgRodadas">Rodadas: 0</span>
        <span class="pill" id="sgGanhas">Ganhas: 0</span>
        <span class="pill" id="sgTaxa">Taxa: 0%</span>
        <span class="pill" id="sgGlobalDone">ConcluÃ­das (Geral): 0/0</span>
      </div>
      <div class="global-progress small">
        <div class="progress"><div id="globalProgressFill" style="width:0%"></div></div>
      </div>
    </section>

    <section class="card" aria-labelledby="secRodada">
      <h3 id="secRodada">ğŸ® Rodada <span id="rodadaAtual">â€”</span>/<span id="rodadasTot">â€”</span></h3>
      <div class="row wrap">
        <span>ğŸ‘¤ <strong id="jogador">â€”</strong></span>
        <span class="pill">Pontos (total): <strong id="pontosTotal">0</strong></span>
        <span class="pill">Pontos da rodada: <strong id="pontosRodada">100</strong></span>
        <span class="pill">Ajudas: <strong id="ajudasRest">3</strong></span>
        <span class="pill">Categoria: <strong id="categoria">â€”</strong></span>
      </div>

      <form id="form" class="row" autocomplete="off">
        <label class="visualmente-hidden" for="palpite">Palpite</label>
        <input id="palpite" type="text" placeholder="Digite seu palpiteâ€¦" aria-describedby="hintPalpite"/>
        <button id="enviar" class="primary" type="submit">Enviar</button>
        <button id="ajuda" type="button">Pedir ajuda (â€“10)</button>
        <button id="limpar" type="button">Limpar</button>
      </form>
      <div id="hintPalpite" class="muted small">Dica: apenas a primeira palavra serÃ¡ usada.</div>

      <div id="feedback" class="aria-live" aria-live="polite">Nenhum palpite ainda.</div>
      <div class="prox-wrap">
        <div class="progress"><div id="progressFill" style="width:0%"></div></div>
        <div class="small" style="margin-top:6px"><strong id="progressPct">0%</strong> â€” proximidade</div>
      </div>
    </section>

    <section class="card" aria-labelledby="secHistorico">
      <h4 id="secHistorico">ğŸ•˜ HistÃ³rico</h4>
      <ul id="historico" class="list"></ul>
    </section>

    <section class="card" aria-labelledby="secRegras">
      <h5 id="secRegras">ğŸ“„ Regras do Jogo</h5>
      <ul class="small">
        <li>Somente a primeira palavra do palpite Ã© considerada.</li>
        <li>Proximidade: ğŸš€ (â‰¤10) Â· âœ¨ (â‰¤20) Â· ğŸ”¥ (â‰¤100) Â· â„ï¸ (&gt;100).</li>
        <li>Ajuda custa 10 pontos. Cada 10 erros descontam 1 ponto.</li>
        <li>As palavras seguem a ordem das categorias informadas.</li>
      </ul>
    </section>
  </main>

  <!-- Stats -->
  <section id="statsPanel" class="modal" role="dialog" aria-modal="true" aria-labelledby="statsTitle" hidden>
    <div class="modal-card">
      <header class="modal-head">
        <h3 id="statsTitle">ğŸ“Š EstatÃ­sticas</h3>
        <button id="closeStats" class="ghost" aria-label="Fechar">âœ•</button>
      </header>
      <div class="modal-body">
        <div class="grid3">
          <div class="tile"><div class="t-label">Rodadas</div><div class="t-value" id="mRodadas">0</div></div>
          <div class="tile"><div class="t-label">Ganhas</div><div class="t-value" id="mGanhas">0</div></div>
          <div class="tile"><div class="t-label">ConcluÃ­das (Geral)</div><div class="t-value" id="mGlobalDone">0/0</div></div>
        </div>
      </div>
    </div>
  </section>

  <!-- Onboarding -->
  <section id="onboarding" class="modal" role="dialog" aria-modal="true" aria-labelledby="onTitle" hidden>
    <div class="modal-card">
      <header class="modal-head">
        <h3 id="onTitle">ğŸ‘‹ Bem-vindo!</h3>
      </header>
      <div class="modal-body small">
        <p>Use o menu <strong>ğŸ¯ Categoria</strong> para escolher onde jogar. O jogo retoma do <strong>ponto exato</strong> da Ãºltima sessÃ£o.</p>
        <ul>
          <li>Uma palavra por palpite.</li>
          <li>Ãcones: <span class="badge rocket">ğŸš€</span>, <span class="badge spark">âœ¨</span>, <span class="badge fire">ğŸ”¥</span>, <span class="badge snow">â„ï¸</span>.</li>
          <li>Atalhos: <kbd>Enter</kbd>=Enviar, <kbd>Esc</kbd>=Limpar, <kbd>A</kbd>=Ajuda (fora do campo), <kbd>?</kbd>=Dicas.</li>
        </ul>
      </div>
      <footer class="modal-foot">
        <button id="onStart" class="primary">ComeÃ§ar</button>
      </footer>
    </div>
  </section>

  <!-- Category Panel -->
  <section id="categoryPanel" class="modal" role="dialog" aria-modal="true" aria-labelledby="catTitle" hidden>
    <div class="modal-card">
      <header class="modal-head">
        <h3 id="catTitle">ğŸ¯ Escolher categoria</h3>
        <button id="closeCategory" class="ghost" aria-label="Fechar">âœ•</button>
      </header>
      <div class="modal-body">
        <ul id="categoryList" class="list"></ul>
      </div>
    </div>
  </section>

  <footer class="footer" role="contentinfo">
    <small>Â© 2025 â€” DDS TechnipFMC Â· PWA Â· Offline Ready</small>
  </footer>

  <script defer>
    window.DEFAULT_DATA = [{"categoria": "EPIs (Equipamentos de ProteÃ§Ã£o Individual)", "palavras": ["Capacete", "Luva", "Ã“culos", "MacacÃ£o", "Viseira", "Jugular", "Carneira", "Botina", "Protetor", "Respirador", "MÃ¡scara", "Avental", "Mangote", "CalÃ§ado", "Colete", "Joelheira", "Touca", "EPI"]}, {"categoria": "SeguranÃ§a e PrevenÃ§Ã£o", "palavras": ["SeguranÃ§a", "SinalizaÃ§Ã£o", "Extintor", "EmergÃªncia", "IluminaÃ§Ã£o", "Cadeado", "Etiqueta", "EvacuaÃ§Ã£o", "Simulado", "Brigada", "Isolamento"]}, {"categoria": "LogÃ­stica e Armazenamento", "palavras": ["Estoque", "Embalagem", "Palete", "Empilhadeira", "Carrinho", "CÃ³digo", "Armazenagem", "MovimentaÃ§Ã£o", "SeparaÃ§Ã£o", "InventÃ¡rio", "ConferÃªncia", "Almoxarifado", "Rastreabilidade", "Etiquetagem"]}, {"categoria": "InspeÃ§Ã£o e Controle", "palavras": ["InspeÃ§Ã£o", "Validade", "Checklist", "Auditoria", "FiscalizaÃ§Ã£o", "Integridade", "CalibraÃ§Ã£o", "CertificaÃ§Ã£o", "HomologaÃ§Ã£o", "Controle", "RelatÃ³rio", "Registro"]}, {"categoria": "Ferramentas e Componentes", "palavras": ["Chapa", "Cabos", "Manilha", "Catraca", "Talha", "Corrente", "MosquetÃ£o", "Gancho", "Roletes", "Alicate", "Martelo", "Serra", "Furadeira", "Parafusadeira", "Trena", "NÃ­vel", "MultÃ­metro"]}, {"categoria": "Procedimentos e Treinamentos", "palavras": ["DDS", "Treinamento", "Procedimento", "Cronograma", "Documento", "Plano", "IntegraÃ§Ã£o", "Palestra", "SIPAT", "AvaliaÃ§Ã£o", "Certificado", "Programa", "ComunicaÃ§Ã£o", "ReuniÃ£o", "Feedback"]}, {"categoria": "OperaÃ§Ãµes e Atividades", "palavras": ["Transporte", "Carga", "Embarque", "Desembarque", "Limpeza", "Coleta", "Abastecimento", "ReposiÃ§Ã£o", "Monitoramento", "SupervisÃ£o", "Apoio", "Atendimento", "OperaÃ§Ã£o"]}, {"categoria": "Infraestrutura e InstalaÃ§Ãµes", "palavras": ["VestiÃ¡rio", "RefeitÃ³rio", "Ãrea", "Sala", "Oficina", "GalpÃ£o", "Plataforma", "Armazenamento", "Descarte", "ManutenÃ§Ã£o", "Portaria", "Estacionamento", "EscritÃ³rio", "Administrativa", "TÃ©cnica", "Externa", "Interna"]}];
  </script>
  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore-compat.js"></script>
  <script defer src="./firebase-config.js"></script>
  <script defer src="./app.js"></script>
</body>
</html>
